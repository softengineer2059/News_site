<!DOCTYPE html>
{% extends 'base.html' %}
{% load static%}
    {% block body %}
                    <div class="page-header">
                        <div class="page-leftheader">
                            <h4 class="page-title">Страница редактирования подкатегорий</h4>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 bootstrap snippets">
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="page-title">Список подкатегорий:</h4>
                                </div>
                                <div class="card-body ">
                                    <div class="table-responsive ">
                                        <table class="table table-bordered text-nowrap border-top">
                                            <thead class="">
                                                <tr>
                                                    <th>Название подкатегории</th>
                                                    <th>Url</th>
                                                    <th>Категория</th>
                                                    <th class="w-5">Действия</th>
                                                </tr>
                                            </thead>

                                            <tbody>
                                                {% for i in data %}
                                                    <tr>
                                                        <td class="price">{{ i.name }}</td>
                                                        <td class="price">{{ i.slug }}</td>
                                                        <td class="price">{{ i.category_name }}</td>
                                                        <td class="d-flex w-100">
                                                            <button onclick="send_url_to_modal_subcategory({{ i.pk }})" type="button" class="btn btn-primary mt-3" data-bs-toggle="modal" data-bs-target="#delete-modal">Удалить</button>
                                                            <button onclick="send_url_to_modal_subcategory_edit(this)" type="button" class="btn btn-primary mt-3"
                                                                    data-bs-toggle="modal" data-bs-target="#edit-modal"  data-subcategory-id="{{ i.pk }}" data-subcategory-name="{{ i.name }}" data-subcategory-slug="{{ i.slug }}">Изменить
                                                            </button>
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#create-modal"><i class="fe fe-plus me-2"></i>Добавить подкатегорию</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
    {% endblock body %}

                    {% block modal %}
                        <div class="modal  fade" id="delete-modal" tabindex="-1" role="dialog" aria-labelledby="smallmodal" aria-hidden="true">
                            <div class="modal-dialog modal-sm" role="document">
                                <form id="remove-link" method="post" action="#">
                                    {% csrf_token %}
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title">Удаление подкатегории</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">×</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <p>Удалить подкатегорию из базы?</p>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Нет</button>
                                            <button type="submit" class="btn btn-primary" data-bs-dismiss="modal">да</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <div class="modal  fade" id="create-modal" tabindex="-1" role="dialog" aria-labelledby="smallmodal" aria-hidden="true">
                            <div class="modal-dialog modal-sm" role="document">
                                <form method="post" action="{% url 'create_art_subcat' %}">
                                    {% csrf_token %}
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="">Создание подкатегории</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">×</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <input class="form-control mb-4" placeholder="Введите название подкатегории" type="text" name="name">
                                            <input class="form-control mb-4" placeholder="Введите url" type="text" name="slug">
                                                <select class="form-control mb-4" type="text" name="category" id="category_select">
                                                    {% for i in category %}
                                                        <option value="{{i.id}}">{{i.name}}</option>
                                                    {% endfor %}
                                                </select>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Нет</button>
                                            <button type="submit" class="btn btn-primary" data-bs-dismiss="modal">да</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <div class="modal  fade" id="edit-modal" tabindex="-1" role="dialog" aria-labelledby="smallmodal" aria-hidden="true">
                            <div class="modal-dialog modal-sm" role="document">
                                <form id="edit-form" method="post">
                                    {% csrf_token %}
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title">Редактирование подкатегории</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">×</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <input id="input-name" class="form-control mb-4" placeholder="Введите название подкатегории" type="text" name="name">
                                            <input id="input-slug" class="form-control mb-4" placeholder="Введите url" type="text" name="slug">
                                                <select class="form-control mb-4" type="text" name="category" id="category_select_edit">
                                                    {% for i in category %}
                                                        <option value="{{i.id}}">{{i.name}}</option>
                                                    {% endfor %}
                                                </select>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Нет</button>
                                            <button type="submit" class="btn btn-primary" data-bs-dismiss="modal">да</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>

                    {% endblock modal %}


        {% include 'scripts.html' %}
        {% block scripts %}
            <script src="{% static ''%}assets/js/send_url_to_modal.js"></script>
		{% endblock scripts %}